{% extends 'layout/layout.html' %}

{% block title %}Solicitudes Producción{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cocina.scss.css') }}">
{% endblock %}

{% block content %}
<h1 class="titulo-cocina">Solicitudes producción</h1>
<div class="contenedor-solicitudes" id="contenedor">
    {% for solicitudProduccion in solicitudesProduccion %}
    <div class="order-card">
        <h2 class="title">{{ solicitudProduccion.receta.nombre }}</h2>
        <div class="centrar-contenido">
            <img src="{{ url_for('static', filename='img/cookies/' ~ solicitudProduccion.receta.imagen) }}">
        </div>
        <div class="c-body">
            <div class="top">
                <ul class="progress-line">
                    <li class="green">
                        <span>Solicitud realizada</span>
                        <div class="icon">
                            <i class="fa-solid fa-check"></i>
                        </div>
                    </li>
                    <li>
                        <span>En preparación</span>
                        <div class="icon">
                            <i class="fa-solid fa-fire-burner"></i>
                        </div>
                    </li>
                    <li>
                        <span>Lista recolección</span>
                        <div class="icon">
                            <i class="fa-solid fa-share"></i>
                        </div>
                    </li>
                    <li>
                        <span>Solicitud entregada</span>
                        <div class="icon">
                            <i class="fa-solid fa-circle-check"></i>
                        </div>
                    </li>
                </ul>

                <div class="contenedor-usuarios-detalles">
                    <div class="c-media b-border contenedor-detalles">
                        <div class="icono">
                            <i class="fa-solid fa-circle-user"></i>
                        </div>
                        <div class="details">
                            <div class="titulo-detalle">Solicitud</div>
                            <div class="contenido-detalle">{{ solicitudProduccion.usuarioSolicitud.nombre }}</div>
                        </div>
                    </div>

                    <div class="c-media b-border contenedor-detalles">
                        <div class="icono">
                            <i class="fa-solid fa-kitchen-set"></i>
                        </div>
                        <div class="details">
                            <div class="titulo-detalle">Cocinero</div>
                            <div class="contenido-detalle">
                                {% if solicitudProduccion.usuarioProduccion is not none %}
                                {{ solicitudProduccion.usuarioProduccion.nombre }}
                                {% else %}
                                No asignado
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="c-media b-border contenedor-detalles">
                        <div class="icono">
                            <i class="fa-solid fa-calendar-days"></i>
                        </div>
                        <div class="details">
                            <div class="titulo-detalle">Fecha</div>
                            <div class="contenido-detalle">{{ solicitudProduccion.fecha_solicitud.strftime('%Y-%m-%d')}}
                            </div>
                        </div>
                    </div>

                    <div class="c-media b-border contenedor-detalles">
                        <div class="icono">
                            <i class="fa-regular fa-clock"></i>
                        </div>
                        <div class="details">
                            <div class="titulo-detalle">Hora</div>
                            <div class="contenido-detalle">{{ solicitudProduccion.fecha_solicitud.strftime('%H:%M:%S')
                                }}</div>
                        </div>
                    </div>

                    <div class="c-media b-border contenedor-detalles">
                        <div class="icono">
                            <i class="fa-solid fa-hashtag"></i>
                        </div>
                        <div class="details">
                            <div class="titulo-detalle">Tandas</div>
                            <div class="contenido-detalle">{{ solicitudProduccion.tandas }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="botones-solicitud">
            <button type="submit" class="boton btn-cancelar">Cancelar solicitud</button>
            <button type="submit" class="boton btn-aceptar">Aceptar solicitud</button>
        </div>
    </div>
    {% else %}
    <div class="solicitudes-vacias">
        <h2>No se encontraron solicitudes de producción.</h2>
    </div>
    {% endfor %}
</div>

<script>
    $(document).ready(function () {
        $("#contenedor").sortable({
            start: function (event, div) {
                div.item.data('start-index', div.item.index());
            },
            update: function (event, div) {
                var startIndex = div.item.data('start-index');
                var endIndex = div.item.index();
                console.log("El elemento se movió de la posición " + (startIndex + 1) + " a la posición " + (endIndex + 1));
            }
        });
        $("#contenedor").disableSelection();
    });
</script>
{% endblock %}